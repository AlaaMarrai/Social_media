{% load static %}

<!DOCTYPE html>
<html lang="en">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
	<title>Profile - {{user_profile.user.username}}</title>
   <!-- <link rel="icon" href="images/fav.png" type="image/png" sizes="16x16"> -->
    
    <link rel="stylesheet" href="{% static 'css/main.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/color.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">

	<link rel="stylesheet" href="{% static 'assets/css/uikit.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/icons.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/tailwind.css' %}">  

</head>
<body>
	
<!--<div class="se-pre-con"></div>-->
<div class="theme-layout">
	
	</div>
	
	<section>
		
			<div class="feature-photo">
				<figure><img src="{% static 'images/resources/timeline-1.jpg' %}" alt=""></figure>
				<form action="/follow/" method="POST">
					{% csrf_token %}

					<input type="hidden" value="{{user.username}}" name="follower" />	
					<input type="hidden" value="{{user_object.username}}" name="user" />
					{%if user.username == user_object.username%}
					<div class="add-btn">
					<span style="color: white; font-size: 27px; margin-right: 305px;"><b><u><a href="/">Home</a></u></b></span>
					<span style="color: white; font-size: 27px;"><b>{{num_posts}} Post</b></span>
					<span style="color: white; font-size: 27px;"><b>{{user_followers}} followers</b></span>
					<span style="color: white; font-size: 27px;"><b>{{user_following}} following</b></span>

					
					<a href="/settings" data-ripple=""><button type="button" style="background-color: #ffc0cb; border: #ffc0cb; font-size: 16px; ">Account Settings</button></a>
					{% else %}
					<div class="add-btn">
						<span style="color: white; font-size: 27px; margin-right: 393px;"><b><u><a href="/">Home</a></u></b></span>
						<span style="color: white; font-size: 27px;"><b>{{num_posts}} Post</b></span>
						<span style="color: white; font-size: 27px;"><b>{{user_followers}} followers</b></span>
						<span style="color: white; font-size: 27px;"><b>{{user_following}} following</b></span>
					<a data-ripple=""><button type="submit" style="background-color: #ffc0cb; border: #ffc0cb;">{{button_text}}</button></a>
					{% endif%}
					</div>
				</form>
				

				<!-- <form class="edit-phto">
					<i class="fa fa-camera-retro"></i>
					<label class="fileContainer">
						Upload Cover Photo
					<input type="file"/>
					</label>
				</form> -->
				<div class="container-fluid">
					<div class="row merged">
						<div class="col-lg-2 col-sm-3">
							<div class="user-avatar">
								<figure>
									<img src="{{user_profile.profile_pic.url}}" style="height: 250px; width: 100%;" alt="">
							{% comment %} <form class="edit-phto">
										<i class="fa fa-camera-retro"></i>
										<label class="fileContainer">
											<a href="#account-settings">Upload Profile Photo</a>
										</label>
									</form> {% endcomment %}
								</figure>
							</div>
						</div>
						<div class="col-lg-10 col-sm-9">
							<div class="timeline-info">
								<ul>
									<li class="admin-name">
									  <h5 style="color: black;white-space: nowrap; width: 110px; font-size: 27px; "><b>@{{user_profile.user.username}}</b><!--<i class="fa fa-check-circle" style="color: #48dbfb;" aria-hidden="true"></i>--></h5>
									  <!--<span>Group Admin</span>-->
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section><!-- top area -->
		<section>
			<div class="bio" 	>
				{{user_profile.bio}}
			</div>
		</section>
		
	<section>
		<div class="gap gray-bg">
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-12">
						<div class="row" id="page-contents">
							<div class="col-lg-3">

							</div><!-- sidebar -->
							











									<div class="container m-auto">

										<!--<h1 class="lg:text-2xl text-lg font-extrabold leading-none text-gray-900 tracking-tight mb-5"> Feed </h1>--->
						
										<div class="lg:flex justify-center lg:space-x-10 lg:space-y-0 space-y-5">
						
											<!-- left sidebar-->
											<div class="space-y-5 flex-shrink-0 lg:w-7/12">
						
												<!-- post 1-->
												{% for post in user_posts reversed %}
												<div class="bg-white shadow rounded-md  -mx-2 lg:mx-0">
													
													<!-- post header-->
													<div class="flex justify-between items-center px-4 py-3">
														<div class="flex flex-1 items-center space-x-4">
											  <a href="{{user_profile.profile_pic.url}}">
																<div class="bg-gradient-to-tr from-yellow-600 to-pink-600 p-0.5 rounded-full">  
																	<img src="{{user_profile.profile_pic.url}}" class="bg-gray-200 border border-white rounded-full w-8 h-8">
																</div>
															</a>
															<span class="block capitalize font-semibold "><a href="/profile/{{post.user.username}}">@{{post.user.username}}</a></span>
														</div>
													  <div>
														
														<a href="#"> <i class="icon-feather-more-horizontal text-2xl hover:bg-gray-200 rounded-full p-2 transition -mr-1 "></i> </a>
														<div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100  " uk-drop="mode: hover;pos: top-right">
													  
															<ul class="space-y-1">

																<li> 
																	<a href="#" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md" onclick="openEditModal('{{ post.post_id }}')">
																		<i class="uil-edit-alt mr-1"></i> Edit Post
																	</a> 
																</li>
																
																<!-- Edit Modal HTML -->
																<div id="editModal" class="modal">
																	<div class="modal-content">
																		<form action="/edit_post/{{ post.post_id }}/" method="POST">
																			{% csrf_token %}
																			<label for="caption">Caption:</label>
																			<input type="text" id="caption" name="caption" value="{{ post.caption }}">
																			<button type="submit">Save</button>
																		</form>
																		<button onclick="closeModal()">Cancel</button>
																	</div>
																</div>
																
																<script>
																	function openEditModal(postId) {
																		var modal = document.getElementById("editModal");
																		modal.style.display = "block";
																		centerModal();

																		function centerModal() {
																			var modalContent = modal.getElementsByClassName("modal-content")[0];
																			modalContent.style.marginTop = (window.innerHeight - modalContent.offsetHeight) / 2 + "px";
																		}
																		
																		window.addEventListener("resize", centerModal);
																		
																		function closeModal() {
																			modal.style.display = "none";
																			window.removeEventListener("resize", centerModal);
																		}
																	}
																		
																		

																	}
																</script>
																
															  <li> 
																  <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md ">
																   <i class="uil-comment-slash mr-1"></i>   Disable comments
																  </a> 
															  </li> 

															  <li>
																<hr class="-mx-2 my-2 ">
															  </li>
 															  <li> 
 																<a href="#" class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md" onclick="confirmDelete('{{ post.post_id }}')">
 																	<i class="uil-trash-alt mr-1"></i> Delete
 																</a> 
 															</li>
 															
 															<script>
 																function confirmDelete(postId) {
 																	if (confirm('Are you sure you want to delete this post?')) {
 																		window.location.href = '/delete_post/' + postId + '/';
 																	}
 																}
 															</script>


															</ul>
														
														</div>
													  </div>
													</div>
													
													<div uk-lightbox>
														<a href="{{post.image_url.url}}">  
															<img src="{{ post.image_url.url }}" alt="">
														</a>
														
													</div>
													
													<br>
													<div class="py-3 px-4 space-y-3 text-black" > 
													<a><strong>{{post.caption}}</strong> </a>
													</div>
													
													
													<hr>
						
													<div class="py-3 px-4 space-y-3"> 
													   
														<div class="flex space-x-4 lg:font-bold">
															<a href="/like?post_id={{post.post_id}}" class="flex items-center space-x-2">
																<div class="p-2 rounded-full text-black">
																	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="25" height="25" class="">
																		<path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
																	</svg>
																	
																</div>
																
															</a>
															
															<a href="#" class="flex items-center space-x-2">
																<div class="p-2 rounded-full text-black">
																	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="25" height="25" class="">
																		<path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />
																	</svg>
																</div>
																{%if post.num_likes == 0 %}
																<p>No likes</p>
																{%elif post.num_likes == 1 %}
																<p>Liked by {{post.num_likes}} person</p>
																{%else%}
																<p>Liked by {{post.num_likes}} people</p>
																{% endif %}
																
															</a>
															<a href="{{post.image_url.url}}" class="flex items-center space-x-2 flex-1 justify-end" download>
																<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="25" height="25" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><g fill="currentColor"><path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v6h-2a.5.5 0 0 0-.354.854l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5A.5.5 0 0 0 10.5 7.5h-2v-6z"/></g></svg>
																
															</a>
														</div>
						
														<div class="bg-gray-100 bg-gray-100 rounded-full rounded-md relative">
															<form action="/add_comment/{{ post.post_id }}/" method="POST">
															  {% csrf_token %}
															  <input type="text" name="comment_text" placeholder="Add a comment" class="bg-transparent max-h-10 shadow-none">
															  <div class="absolute bottom-0 right-3">
																<button type="submit" class="focus:outline-none">
																  Add Comment
																</button>
															  </div>
															</form>
														  </div>
							
													</div>
							
												</div>
												
												<div class="border-t pt-4 space-y-4">
													{% for comment in comments %}
													{% if comment.post.post_id == post.post_id %}
													<div class="flex">
													  <div class="w-10 h-10 rounded-full relative flex-shrink-0">
														<a href="/profile/{{comment.user}}"><img src="{{comment.profile.profile_pic.url}}" alt="" class="absolute h-full rounded-full w-full"></a>
													  </div>
													  <div class="text-gray-700 py-2 px-3 rounded-md bg-gray-100 h-full relative lg:ml-5 ml-2 lg:mr-20">
														<p class="leading-6">{{ comment.text }}</p>
														<div class="absolute w-3 h-3 top-3 -left-1 bg-gray-100 transform rotate-45"></div>
													  </div>
													  {% if comment.user.username == user_profile.user.username %}  
													  <div class = "pos: right;" >  	<a href="#" class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md" onclick="confirmDelete('{{ comment.comment_id }}')">
														<i class="uil-trash-alt mr-1"></i> Delete
													</a></div>
				
													<script>
														function confirmDelete(commentId) {
															if (confirm('Are you sure you want to delete this comment?')) {
																window.location.href = '/delete_comment/' + commentId + '/';
															}
														}
													</script>
				
													{% endif%}

													</div>
													{% endif%}
													{% endfor %}
												  </div>
													

												<hr>
												{% endfor %}
						
												
											</div>
									<!--<div class="lodmore"><button class="btn-view btn-load-more"></button></div>-->
										</div>
											
							<div class="col-lg-3">
								<aside class="sidebar static">
									
								</aside>
							</div><!-- sidebar -->
						</div>	
					</div>
				</div>
			</div>
		</div>	
	</section>

	
	
{% comment %} 	<script data-cfasync="false" src="{% static '../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js' %}"></script> {% endcomment %}
	<script src="{% static 'js/main.min.js' %}"></script>
	<script src="{% static 'js/script.js' %}"></script>

    <script src="{% static 'assets/js/uikit.js' %}"></script>

	

	

</body>	


</html>